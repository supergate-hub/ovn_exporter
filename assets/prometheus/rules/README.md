
# OVS Prometheus Alerts Table

This table lists all Prometheus alert rules for the OVS Exporter, including the alert name, query, duration, severity, and a direct link to run the query in Prometheus. Use this as a reference for monitoring and troubleshooting OVS infrastructure health.

## Quick Troubleshooting Guide

- **Exporter Down / OVS Down**: Check if the exporter or OVS services are running and reachable. Restart the service if needed. Check logs for errors.
- **Failed Requests**: Investigate recent changes, network issues, or resource exhaustion. Review OVS logs for error messages.
- **Interface Alerts**: For link down, errors, or high drop rates, check physical connections, interface status, and switch logs. Replace faulty cables or hardware if needed.
- **Datapath Alerts**: High miss/loss/flow counts may indicate misconfiguration, excessive rules, or performance bottlenecks. Review OVS configuration and optimize flows.
- **Resource/Log File Alerts**: Clean up disk space, rotate logs, or increase resources as needed.

| Alert Name                   | Query | For  | Severity | Prometheus Link |
|------------------------------|-------|------|----------|-----------------|
| OVSExporterDown              | up{job="ovs-exporter"} == 0 | 2m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=up%7Bjob%3D%22ovs-exporter%22%7D%20%3D%3D%200&g0.show_tree=0&g0.tab=table) |
| OVSDown                      | ovs_up == 0 | 1m | critical | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=ovs_up%20%3D%3D%200&g0.show_tree=0&g0.tab=table) |
| OVSFailedRequestsIncreasing  | sum by(system_id) (rate(ovs_failed_requests_total[5m])) > 0.1 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%29%20%28rate%28ovs_failed_requests_total%5B5m%5D%29%29%20%3E%200.1&g0.show_tree=0&g0.tab=table) |
| OVSHighFailedRequestRate     | sum by(system_id) (rate(ovs_failed_requests_total[5m])) > 1 | 2m | critical | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%29%20%28rate%28ovs_failed_requests_total%5B5m%5D%29%29%20%3E%201&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceReceiveErrors    | sum by(system_id,uuid) (rate(ovs_interface_rx_errors_total[5m])) > 0 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_rx_errors_total%5B5m%5D%29%29%20%3E%200&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceTransmitErrors   | sum by(system_id,uuid) (rate(ovs_interface_tx_errors_total[5m])) > 0 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_tx_errors_total%5B5m%5D%29%29%20%3E%200&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceHighDropRate     | (sum by(system_id,uuid) (rate(ovs_interface_rx_dropped_total[5m])) + sum by(system_id,uuid) (rate(ovs_interface_tx_dropped_total[5m]))) > 100 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=%28sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_rx_dropped_total%5B5m%5D%29%29%20%2B%20sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_tx_dropped_total%5B5m%5D%29%29%29%20%3E%20100&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceLinkFlapping     | sum by(system_id,uuid) (rate(ovs_interface_link_resets_total[5m])) > 0.1 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_link_resets_total%5B5m%5D%29%29%20%3E%200.1&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceCRCErrors        | sum by(system_id,uuid) (rate(ovs_interface_rx_crc_errors_total[5m])) > 0 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_rx_crc_errors_total%5B5m%5D%29%29%20%3E%200&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceFrameErrors      | sum by(system_id,uuid) (rate(ovs_interface_rx_frame_errors_total[5m])) > 0 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_rx_frame_errors_total%5B5m%5D%29%29%20%3E%200&g0.show_tree=0&g0.tab=table) |
| OVSInterfaceOverruns         | sum by(system_id,uuid) (rate(ovs_interface_rx_overrun_errors_total[5m])) > 0 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cuuid%29%20%28rate%28ovs_interface_rx_overrun_errors_total%5B5m%5D%29%29%20%3E%200&g0.show_tree=0&g0.tab=table) |
| OVSDatapathHighMissRatio     | sum by(system_id,datapath) (rate(ovs_dp_lookups_missed_total[5m])) / (sum by(system_id,datapath) (rate(ovs_dp_lookups_hit_total[5m])) + sum by(system_id,datapath) (rate(ovs_dp_lookups_missed_total[5m])) + 0.001) > 0.1 | 10m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cdatapath%29%20%28rate%28ovs_dp_lookups_missed_total%5B5m%5D%29%29%20%2F%20%28sum%20by%28system_id%2Cdatapath%29%20%28rate%28ovs_dp_lookups_hit_total%5B5m%5D%29%29%20%2B%20sum%20by%28system_id%2Cdatapath%29%20%28rate%28ovs_dp_lookups_missed_total%5B5m%5D%29%29%20%2B%200.001%29%20%3E%200.1&g0.show_tree=0&g0.tab=table) |
| OVSDatapathFlowsHigh         | max by(system_id,datapath) (ovs_dp_flows) > 100000 | 5m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=max%20by%28system_id%2Cdatapath%29%20%28ovs_dp_flows%29%20%3E%20100000&g0.show_tree=0&g0.tab=table) |
| OVSDatapathPacketsLost       | sum by(system_id,datapath) (rate(ovs_dp_lookups_lost_total[5m])) > 0 | 2m | critical | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=sum%20by%28system_id%2Cdatapath%29%20%28rate%28ovs_dp_lookups_lost_total%5B5m%5D%29%29%20%3E%200&g0.show_tree=0&g0.tab=table) |
| OVSHighMemoryUsage           | max by(system_id) (ovs_memory_usage_bytes) > 1073741824 | 10m | warning | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=max%20by%28system_id%29%20%28ovs_memory_usage_bytes%29%20%3E%201073741824&g0.show_tree=0&g0.tab=table) |
| OVSLogFileLarge              | ovs_log_file_size_bytes > 104857600 | 30m | info | [link](https://prometheus-openstack.hou1-ion01.ionstream.org/query?g0.expr=ovs_log_file_size_bytes%20%3E%20104857600&g0.show_tree=0&g0.tab=table) |
